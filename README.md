一个小项目，利用gin和gorm
能够注册账号，并给好友发邮件
在项目中写下go mod tidy
在config.json中配置数据库
下面是接口文档

![屏幕截图 2025-01-10 221655](https://github.com/user-attachments/assets/1698311c-7c7f-4731-9bd3-0cf2b1911a2a)
![屏幕截图 2025-01-10 221702](https://github.com/user-attachments/assets/dcb5c341-df91-4efa-a68b-ced6fc254634)
![屏幕截图 2025-01-10 221708](https://github.com/user-attachments/assets/fdfd60e8-2857-440c-910f-840ea672209e)
![屏幕截图 2025-01-10 221713](https://github.com/user-attachments/assets/91ee7c49-b3da-4ffc-8327-3176f7fd16d9)

业务逻辑：

一、用户登录

1.注册用户（SaveUser）
用户注册的业务逻辑包含了用户名和密码的验证、密码加密存储以及用户数据插入数据库。
业务步骤：
密码长度校验：首先检查密码的长度是否小于6位，如果小于6位，则返回错误。
验证用户名和密码是否重复：
使用 MD5 加密密码后，通过 LoginByUserName 方法检查是否已经有相同用户名和密码的记录。
如果用户名和密码已经存在，返回重复错误。
插入用户数据：
如果用户名和密码合法且不重复，则通过 InsertUser 方法将用户信息插入数据库。
插入成功后，返回注册成功信息，包含插入的 uid。

2.用户登录（Login）
用户登录的业务逻辑包括用户名密码登录和UID密码登录两种方式。通过验证用户的用户名和密码，生成 JWT 并返回。
业务步骤：
用户名密码登录：
首先使用 MD5 加密密码，然后通过 LoginByUserName 方法验证用户名和密码是否匹配。
如果用户名和密码匹配，生成 JWT（JSON Web Token），并返回登录成功信息，包含 uid 和 jwt。
UID 密码登录：
如果用户名密码登录失败，并且传入了 uid 参数，则尝试使用 LoginByUid 方法验证 UID 和密码是否匹配。
如果 UID 和密码匹配，同样生成 JWT 并返回登录成功信息。
登录失败：
如果用户名密码和 UID 密码都验证失败，则返回账号或密码错误的提示。

二、好友相关操作

1.添加好友（InsertFriend）
此功能允许用户向其他用户发送好友请求并将其添加到自己的好友列表中。
业务步骤：
获取用户名：根据 friendUid 获取好友的用户名。
添加好友：
如果用户名有效（非空），则创建 ListEntity 实体并将其保存到数据库。
返回添加成功的消息。
如果用户名无效，返回错误信息。

2.更新好友备注（UpdateRemark）
该功能用于更新好友的备注。
业务步骤：
更新备注：
调用 ListMapper 的 UpdateRemark 方法更新好友备注。
成功更新后，返回成功消息。

3.设置亲密关系（SetRelationship）
该功能允许用户设置与好友之间的亲密关系（例如，最佳朋友、普通朋友等）。
业务步骤：
设置亲密关系：
调用 ListMapper 的 SetRelationship 方法来设置亲密关系。
成功设置后，返回成功消息。

4.删除好友（DeleteFriend）
该功能允许用户将好友从好友列表中假删除。
业务步骤：
假删除好友：
调用 ListMapper 的 DeleteFriend 方法，将好友从列表中移除（假删除）。
成功删除后，返回删除成功的消息。

5. 查看好友申请（CheckWhoAdd）
该功能用于查看向当前用户发送好友请求的所有用户。
业务步骤：
查看好友申请：
调用 ListMapper 的 CheckWhoAdd 方法，获取向 friendUid 发送好友请求的所有用户的 UID。
返回所有发送请求的用户的 UID 列表。

6.同意好友申请（AgreeFriendAdd）
该功能允许用户同意某个好友申请，将该好友添加到自己的好友列表中。
业务步骤：
同意好友申请：
调用 ListMapper 的 AgreeFriendAddUser 方法，同意好友请求。
获取好友的用户名。
创建 ListEntity 实体，将好友添加到数据库中，标记为已成为好友（IsFriend = 1）。
返回同意成功的消息。

7.查看好友列表（ShowAllFriend）
该功能用于查看当前用户的好友列表，支持分页。
业务步骤：
获取好友列表：
调用 ListMapper 的 ShowAllFriend 方法，根据 pageNum 分页获取好友列表。
返回好友列表及分页信息。

三、群组业务

1.创建群组（InsertGroup）
该功能允许用户创建一个新的群组，并将其保存到数据库中。
业务步骤：
构建群组实体：通过 userUid 和 friendUid 以及群组名称 groupName 创建 GroupEntity 实体。
保存群组：将群组实体保存到数据库中。
返回结果：如果保存成功，返回成功消息；如果保存失败，返回错误信息

2.群发邮件（SendEmailToAll）
该功能允许用户向群组中的所有成员发送一封电子邮件。
业务步骤：
获取当前时间：群发邮件时记录邮件的发送时间。
获取群组成员：根据群组名称和用户 UID，查询群组中的所有成员的 UID。
发送邮件：
遍历群组成员 UID，为每个成员创建一个 EmailEntity 实体。
将邮件实体保存到数据库中。
返回结果：如果所有邮件发送成功，返回成功消息；如果过程中有错误，返回相应的错误信息。

四、email业务

1.发送邮件 (SendEmail)
目的：将邮件从发件人发送到收件人。
操作步骤：
创建邮件实体，包含发件人UID、收件人UID、标题、内容和发送时间。
将邮件信息插入数据库。
返回结果：成功时返回“发送成功”，失败时返回“发送信件错误”。

2.接收邮件 (ReceiveEmail)
目的：接收指定用户的邮件，支持分页查看（每页5封邮件）。
操作步骤：
计算分页偏移量。
调用 EmailMapper.ShowAllEmailEntity 获取邮件列表。
返回结果：
如果成功，返回邮件列表及提示信息。
如果失败，返回“接收信件错误”。

3.模糊查询邮件 (SelectEmail)
目的：根据关键字（如邮件标题或内容）查询邮件。
操作步骤：
使用关键字进行模糊查询，获取匹配的邮件列表。
返回结果：
查询成功时，返回查询结果及提示信息。
查询失败时，返回错误信息。

4.漂流瓶 (DriftEmail)
目的：模拟向随机用户发送邮件，即“漂流瓶”功能。
操作步骤：
将收件人UID设置为 0，表示没有指定特定收件人，而是发送给一个随机用户。
插入漂流瓶邮件到数据库。
返回结果：
如果成功，返回“发送成功”。
如果失败，返回“漂流瓶错误”。

5.定时发送邮件 (TimeEmail)
目的：实现邮件定时发送功能，邮件将在指定的延迟时间后发送。
操作步骤：
创建邮件实体并插入数据库，设置初始状态为“不可见”。
使用 goroutine 延迟邮件的发送（通过 time.Sleep 等待指定的延迟时间），然后更新邮件的发送时间和可见性。
返回结果：
如果成功，返回“发送成功”。
如果失败，返回“定时发送错误”。

6. 删除邮件 (DeleteEmail)
目的：删除指定的邮件。
操作步骤：
尚未实现具体的删除操作，可能需要调用 EmailMapper 执行删除操作。
返回结果：
返回“删除成功”，表明该操作已完成。
